-if @work.errors.any?
  #error_explanation
    %h2= t('errors.template.header', :model=> Work.model_name.human, :count=> @work.errors.count)
    %ul
      - @work.errors.full_messages.each do |msg|
        %li= msg
#createTimeWrapper
  = form_for(@work, :remote => false) do |f|
    %dl
      %dt.time= f.label :started_at, "Start:"
      %dd.time= f.text_field :started_at, :size => 4, :value => "08:00"
      %dt.time= f.label :ended_at, "End:"
      %dd.time= f.text_field :ended_at, :size => 4, :value => "09:00"
      %dd.description= f.text_area :description
      %dt.submit
        = f.hidden_field :project_id, :value => @projects.first.id
        = f.hidden_field :day, :value => @daySelected.strftime("%Y-%m-%d")
        = f.submit "Save time", :class => "submit"
#selectWrapper
  %dl
    %dt Customer
    %dd= render :partial => "customerlist"
    %dt Project
    %dd= render :partial => "projectlist"
.clear

:javascript
  dojo.addOnLoad(function() {
      new dijit.form.TimeTextBox({
          name: "work[started_at]",
          value: new Date(),
          constraints: {
              timePattern: 'HH:mm',
              clickableIncrement: 'T00:15',
              visibleIncrement: 'T00:15',
              visibleRange: 'T02:00'
          }
      }, "work_started_at");
      new dijit.form.TimeTextBox({
          name: "work[ended_at]",
          value: new Date(),
          constraints: {
              timePattern: 'HH:mm',
              clickableIncrement: 'T00:15',
              visibleIncrement: 'T00:15',
              visibleRange: 'T02:00'
          }
      }, "work_ended_at");
  });
  $(document).ready(function () {
    $('form#new_work').submit(function() {
      startet_at = $("input[name='work[started_at]']");
      ended_at = $("input[name='work[ended_at]']");
      startet_at.val(startet_at.val().replace('T', ''));
      ended_at.val(ended_at.val().replace('T', ''));
    });
  });