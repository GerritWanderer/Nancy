#projectForm.wizard
  -if params[:action] == 'new' || params[:action] == 'edit' || params[:action] == 'create' || params[:action] == 'update'
    = link_to "Close Project Form", projects_path, :class => 'wizardFormSwitch'
  -else
    = link_to "Open Project Form", new_project_path, :class => 'wizardFormSwitch'
  .wrapper{:style => "display: #{@displayProjectForm || 'none'};"}
    -if @project.errors.any?
      #error_explanation
        %h2= "#{pluralize(@project.errors.count, "error")} prohibited this project from being saved:"
        %ul
          - @project.errors.full_messages.each do |msg|
            %li= msg
    #createProject
      = form_for(@form_project) do |f|
        %fieldset.project
          %legend Project information
          %dl
            %dt.title= f.label :title
            %dd.title= f.text_field :title
            %dt.description= f.label :description
            %dd.description= f.text_area :description
            .clear
            %dt.small= f.label :discount, "Discount in %"
            %dd.small= f.text_field :discount
            %dt.small= f.label :budget, "Budget in h()"
            %dd.small= f.text_field :budget
            %dt.submit= f.submit 'Save', :class => "submit"
            .clear
        = f.hidden_field :customer_id, :value => params[:customer_id] || @form_customer_id
        = f.hidden_field :contact_id, :value => @form_contact_id
    #selectCustomer
      = form_tag new_project_path, :method => :get, :remote => false do
        %fieldset.customer
          %dl
            %dt Customer
            %dd
              = select_tag(:customer_id, options_for_select(@form_customers.map {|c| [c.name, c.id]}, params[:customer_id].to_i), {:onchange => "this.form.customerSubmit.click();"})
              %input{:type=>"submit", :value=>"submit", :name=>"customerSubmit", :style=>"display:none"}
      = form_tag new_project_path, :method => :get, :remote => false do
        %fieldset.contact
          %dl
            %dt Main Contact
            %dd
              = select_tag(:contact_id, options_for_select(@form_contacts.map {|c| [c.firstname, c.id]}), {:onchange => "$('input#project_contact_id').val(this.value)"})
            .clear
    .clear