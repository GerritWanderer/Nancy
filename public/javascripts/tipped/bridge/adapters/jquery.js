/*
 * BridgeJS jQuery Adapter
 */
window.Bridge||(Bridge={}),jQuery.extend(Bridge,function(a){function u(b){a(document).ready(b)}function q(a){var b=g(a),c=[];s.each(b,function(a){c.push(new p(a))}),this.source=c}function p(a){this.source=f(a)}function o(a,b){var c=[a,b];c.left=a,c.top=b;return c}function i(a){return new q(a)}function h(a){if(a.constructor&&a.constructor==p)return a;var b=new p(a);return b.source&&b}function g(b){return a.find(b)}function f(b){return l.isString(b)?a.find("#"+b)[0]:b}function e(a){return a}function d(){}var b=window.Object.prototype.toString,c=window.Array.prototype.slice,j=function(a,b){b=b||{};return h(document.createElement(a)).writeAttribute(b)},k=window.Object,l=a.extend(function(){function g(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}function f(a){return!!a&&a.nodeType==1}function e(a){return b.call(a)=="[object Number]"}function d(a){return typeof a=="undefined"}function c(a){return b.call(a)=="[object String]"}return{isArray:a.isArray,isFunction:a.isFunction,isNumber:e,isString:c,isUndefined:d,isElement:f,keys:k.keys||g}}(),Bridge.Shared.Object),m=a.extend({argumentNames:function(a){var b=a.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return b.length==1&&!b[0]?[]:b}},Bridge.Shared.Function),n={observe:function(b,c,d){b=h(b),a(b.source).bind(c,d)},stopObserving:function(b,c,d){b=h(b),a(b.source).unbind(c,d)},findElement:function(b,c){var d=b.target;if(!c)return d;return a(d).closest(c)[0]},stop:function(a){a.preventDefault(),a.stopPropagation(),a.stopped=!0},pointer:function(a){return{x:a.pageX,y:a.pageY}},pointerX:function(a){return a.pageX},pointerY:function(a){return a.pageY}};l.extend(p.prototype,{addClassName:function(b){a(this.source).addClass(b);return this},removeClassName:function(b){a(this.source).removeClass(b);return this},getWidth:function(){return a(this.source).outerWidth()},getHeight:function(){return a(this.source).outerHeight()},getDimensions:function(){return{width:this.getWidth(this.source),height:this.getHeight(this.source)}},cumulativeOffset:function(){var b=a(this.source).offset(),c=this.cumulativeScrollOffset(),d=r.getScrollOffsets();b.left+=c.left-d.left,b.top+=c.top-d.top;return o(b.left,b.top)},cumulativeScrollOffset:function(){var a=this.source,b=0,c=0;do b+=a.scrollTop||0,c+=a.scrollLeft||0,a=a.parentNode;while(a);return o(c,b)},remove:function(){a(this.source).remove()},insert:function(){var b={bottom:"append",top:"prepend",after:"after",before:"before"};return function(c){if(l.isElement(c.source||c)||l.isString(c))a(this.source).append(c.source||c);else for(var d in c)a(this.source)[b[d]](c[d].source||c[d]);return this}}(),update:function(b){a(this.source).html(b.source||b);return this},writeAttribute:function(b){a(this.source).attr(b);return this},setStyle:function(b){a(this.source).css(b);return this},getStyle:function(b){return a(this.source).css(b)},show:function(){a(this.source).show();return this},hide:function(){a(this.source).hide();return this},match:function(b){return a(this.source).is(b)},up:function(b){var c=b?a(this.source).closest(b)[0]:a(this.source).parent()[0];return c},down:function(b){var c=b?a(this.source).find(b).first()[0]:a(this.source).children().first()[0];return c},store:function(b,c){a.data(this.source,b,c);return this},retrieve:function(b){return a.data(this.source,b)},eliminate:function(a){this.store(a,null);return this},observe:function(){var a=[this.source].concat(c.call(arguments));n.observe.apply(null,a);return this},stopObserving:function(){var a=[this.source].concat(c.call(arguments));n.stopObserving.apply(null,a);return this}}),l.extend(q.prototype,{invoke:function(){var a=c.call(arguments),b=a.shift();s._each(this.source,function(c){c[b].apply(c,a)});return this},each:function(a,b){var c=0;s._each(this.source,function(d){a.call(b,d,c++)});return this}});var j=function(a,b){b=b||{};return h(document.createElement(a)).writeAttribute(b)},r={getWidth:function(){return a(window).width()},getHeight:function(){return a(window).height()},getDimensions:function(){return{width:this.getWidth(),height:this.getHeight()}},getScrollOffsets:function(){return{left:a(window).scrollLeft(),top:a(window).scrollTop()}}},s=a.extend(function(){function f(b,c){return a.inArray(c,b)>-1}function e(a,b,c){var d=[];this.each(a,function(a,e){b.call(c,a,e)&&d.push(a)});return d}function d(a){var b=c.call(arguments,1);return this.select(a,function(a){return!s.include(b,a)})}function b(a,b,c){var d;this.each(a,function(a,e){if(b.call(c,a,e)){d=a;throw Bridge.Shared["break"]}});return d}return{find:b,detect:b,findAll:e,select:e,without:d,include:f,member:f}}(),Bridge.Shared.Array),t={};t.Request=function(a){this.options=l.extend({onComplete:d,onSuccess:d,onException:d,method:"post",parameters:""},arguments[1]||{}),jQuery.ajax({url:a,data:this.options.parameters,type:this.options.method,complete:Bridge.Shared.Function.bind(function(a){l.isFunction(this.options.onComplete)&&this.options.onComplete(a)},this),success:Bridge.Shared.Function.bind(function(a){l.isFunction(this.options.onSuccess)&&this.options.onSuccess(a)},this),error:Bridge.Shared.Function.bind(function(a,b,c){l.isFunction(this.options.onException)&&this.options.onException(a,c)},this)})};return{Ajax:t,Array:s,each:s.each,_each:s._each,Element:j,Event:n,Function:m,Object:l,domloaded:u,$:h,$$:i,emptyFunction:d,K:e,String:Bridge.Shared.String,Viewport:r}}(jQuery));
